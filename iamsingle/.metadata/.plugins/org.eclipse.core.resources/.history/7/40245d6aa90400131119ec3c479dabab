package shaotian.android.iamsingle.netsdk;

import java.io.UnsupportedEncodingException;

import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpEntityEnclosingRequestBase;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.methods.HttpPut;
import org.apache.http.client.methods.HttpRequestBase;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import org.json.JSONObject;

import shaotian.android.iamsingle.netsdk.WSProvider.METHOD;

//web service provider
public class WSProvider {

	HttpClient httpClient = new DefaultHttpClient();
	HttpContext localContext = new BasicHttpContext();
	HttpRequestBase mMethod;
	private String mServerIP;
	private String mAction;
	private METHOD mMethodType;
	public enum METHOD{
		GET,PUT,POST
	}
	
	
	
	public WSProvider(String serverIp) {
		this.mServerIP=serverIp;
	}



	public void setAction(METHOD method, String actionurl) {
		mMethodType=method;
		switch(method){
		
		case POST:mMethod = new HttpPost("http://"+mServerIP+ actionurl);
				  break;
		case GET: mMethod = new HttpGet("http://"+mServerIP+ actionurl);
				  break;
		case PUT: mMethod = new HttpPut("http://"+mServerIP+ actionurl);
		  		  break;
		}
	}



	public void setContent(String string, JSONObject json) throws UnsupportedEncodingException {
		StringEntity input = new StringEntity(json.toString());
		input.setContentType("application/json");
		switch(mMethodType)
		{
		case PUT:
			((HttpPut)mMethod).setEntity(input);
			break;
		case POST:
			((HttpPost)mMethod).setEntity(input);
			break;
		default: return;
		
		
		}
		
		
	}

}
